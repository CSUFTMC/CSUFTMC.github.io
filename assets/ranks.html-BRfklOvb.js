import{M as b}from"./McProfile-C1JAV_Y1.js";import{_ as S}from"./plugin-vue_export-helper-DlAUqK2U.js";import{g as k,c as o,o as n,e as g,b as s,F as p,r as f,t as c,n as v,a as y,w as T}from"./app-f1BOsS5K.js";const w={name:"Rankings",components:{McProfile:b},props:{servers:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},limit:{type:Number,default:null}},data(){return{rankData:{},lastUpdated:"",loading:!0,selectedPlayer:null,showProfileModal:!1,isAutoScrolling:!1,isHovering:!1,scrollTimer:null}},computed:{filteredData(){let t={};return(this.servers.length>0?Object.keys(this.rankData).filter(a=>this.servers.includes(a)):Object.keys(this.rankData)).forEach(a=>{let d=this.rankData[a];this.items.length>0&&(d=d.filter(l=>this.items.includes(l.name))),d.length>0&&(t[a]=d)}),t}},methods:{startAutoScroll(){this.scrollTimer||(this.scrollTimer=setInterval(()=>{this.isAutoScrolling&&!this.isHovering&&this.$refs.scrollContainer&&(Array.isArray(this.$refs.scrollContainer)?this.$refs.scrollContainer:[this.$refs.scrollContainer]).forEach(e=>{const a=e.scrollWidth-e.clientWidth;e.scrollLeft>=a-1?e.scrollTo({left:0,behavior:"smooth"}):e.scrollBy({left:200,behavior:"smooth"})})},3e3))},toggleAutoScroll(){this.isAutoScrolling=!this.isAutoScrolling},scrollToCenter(t){t.currentTarget.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},handleWheel(t){if(t.deltaY!==0){t.preventDefault();const e=5;t.currentTarget.scrollLeft+=t.deltaY*e}},handleClickPlayer(t){this.selectedPlayer={username:t},this.showProfileModal=!0}},mounted(){fetch("/data/rank.json").then(t=>t.json()).then(t=>{this.rankData=t.data,this.lastUpdated=t.last_updated,this.loading=!1,this.$nextTick(()=>{this.startAutoScroll()})})},beforeUnmount(){this.scrollTimer&&clearInterval(this.scrollTimer)}},A={class:"rankings-wrapper"},P={key:0,class:"loading-box"},M={key:1},x={class:"server-header"},D={class:"header-left"},W={class:"server-title"},N=["title"],U={class:"scroll-icon"},O={class:"scroll-text"},j={class:"rank-category-title"},B={class:"player-list"},F=["onClick"],H={class:"player-main"},I=["src"],V={class:"player-name"},z={class:"player-stats"},E={class:"stat-value"},L={class:"update-footer"};function R(t,e,a,d,l,i){const C=k("McProfile");return n(),o("div",A,[l.loading?(n(),o("div",P,[...e[6]||(e[6]=[s("div",{class:"spinner"},null,-1),s("span",null,"同步排行榜中...",-1)])])):(n(),o("div",M,[(n(!0),o(p,null,f(i.filteredData,(u,_)=>(n(),o("div",{key:_,class:"server-group"},[s("div",x,[s("div",D,[e[7]||(e[7]=s("div",{class:"dot"},null,-1)),s("h2",W,c(_),1)]),s("button",{class:v(["scroll-toggle-btn",{"is-active":l.isAutoScrolling}]),onClick:e[0]||(e[0]=(...r)=>i.toggleAutoScroll&&i.toggleAutoScroll(...r)),title:l.isAutoScrolling?"停止自动滚动":"开始自动滚动"},[s("span",U,c(l.isAutoScrolling?"Ⅱ":"▶"),1),s("span",O,c(l.isAutoScrolling?"正在滚动":"开始滚动"),1)],10,N)]),s("div",{class:"boards-container",ref_for:!0,ref:"scrollContainer",onWheel:e[2]||(e[2]=(...r)=>i.handleWheel&&i.handleWheel(...r)),onMouseenter:e[3]||(e[3]=r=>l.isHovering=!0),onMouseleave:e[4]||(e[4]=r=>l.isHovering=!1)},[(n(!0),o(p,null,f(u,r=>(n(),o("div",{key:r.name,class:"rank-card",onClickCapture:e[1]||(e[1]=(...h)=>i.scrollToCenter&&i.scrollToCenter(...h))},[s("h3",j,c(r.name),1),s("div",B,[(n(!0),o(p,null,f(r.leaderboard.slice(0,a.limit||r.leaderboard.length),(h,m)=>(n(),o("div",{key:m,class:"player-row clickable",onClick:Z=>i.handleClickPlayer(h[1])},[s("div",H,[s("span",{class:v(["rank-index",{"top-three":m<3}])},c(m+1),3),s("img",{src:"https://nmsr.nickac.dev/face/"+h[1],class:"player-avatar"},null,8,I),s("span",V,c(h[1]),1)]),s("div",z,[s("span",E,c(h[2]),1)])],8,F))),128))])],32))),128))],544)]))),128)),s("div",L,"(每小时更新一次) 最后更新于: "+c(l.lastUpdated),1)])),g(C,{"show-details":l.showProfileModal,"onUpdate:showDetails":e[5]||(e[5]=u=>l.showProfileModal=u),"player-profile":l.selectedPlayer},null,8,["show-details","player-profile"])])}const Y=S(w,[["render",R],["__scopeId","data-v-3831c705"]]),K={__name:"ranks.html",setup(t){return(e,a)=>{const d=k("ClientOnly");return n(),o("div",null,[y(" bot-block-start "),g(d,null,{default:T(()=>[g(Y)]),_:1}),y(" bot-block-end ")])}}},Q=JSON.parse('{"path":"/ranks.html","title":"排行榜","lang":"zh-CN","frontmatter":{"title":"排行榜","icon":"trophy","photoSwipe":false,"order":200,"home":true,"heroText":false,"tagline":false,"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"WebPage\\",\\"name\\":\\"排行榜\\"}"],["meta",{"property":"og:url","content":"https://www.csuftmc.dpdns.org/ranks.html"}],["meta",{"property":"og:site_name","content":"CUSFTMC"}],["meta",{"property":"og:title","content":"排行榜"}],["meta",{"property":"og:type","content":"website"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-02-15T17:01:42.000Z"}],["meta",{"property":"article:modified_time","content":"2026-02-15T17:01:42.000Z"}]]},"git":{"createdTime":1768142434000,"updatedTime":1771174902000,"contributors":[{"name":"cc_cece","username":"","email":"cc_cece@outlook.com","commits":9}]},"readingTime":{"minutes":0.11,"words":33},"filePathRelative":"ranks.md"}');export{K as comp,Q as data};
