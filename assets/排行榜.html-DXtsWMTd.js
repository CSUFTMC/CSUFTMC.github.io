import{M as b}from"./McProfile-DJ8JH_2x.js";import{_ as A}from"./plugin-vue_export-helper-DlAUqK2U.js";import{g as k,c as r,o as n,e as g,b as s,F as p,r as f,t as c,n as v,a as y,w as S}from"./app-LpvDGnod.js";const T={name:"Rankings",components:{McProfile:b},props:{servers:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},limit:{type:Number,default:null}},data(){return{rankData:{},lastUpdated:"",loading:!0,selectedPlayer:null,showProfileModal:!1,isAutoScrolling:!1,isHovering:!1,scrollTimer:null}},computed:{filteredData(){let t={};return(this.servers.length>0?Object.keys(this.rankData).filter(i=>this.servers.includes(i)):Object.keys(this.rankData)).forEach(i=>{let d=this.rankData[i];this.items.length>0&&(d=d.filter(l=>this.items.includes(l.name))),d.length>0&&(t[i]=d)}),t}},methods:{startAutoScroll(){this.scrollTimer||(this.scrollTimer=setInterval(()=>{this.isAutoScrolling&&!this.isHovering&&this.$refs.scrollContainer&&(Array.isArray(this.$refs.scrollContainer)?this.$refs.scrollContainer:[this.$refs.scrollContainer]).forEach(e=>{const i=e.scrollWidth-e.clientWidth;e.scrollLeft>=i-1?e.scrollTo({left:0,behavior:"smooth"}):e.scrollBy({left:200,behavior:"smooth"})})},3e3))},toggleAutoScroll(){this.isAutoScrolling=!this.isAutoScrolling},scrollToCenter(t){t.currentTarget.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},handleWheel(t){if(t.deltaY!==0){t.preventDefault();const e=5;t.currentTarget.scrollLeft+=t.deltaY*e}},handleClickPlayer(t){this.selectedPlayer={username:t},this.showProfileModal=!0}},mounted(){fetch("/data/rank.json").then(t=>t.json()).then(t=>{this.rankData=t.data,this.lastUpdated=t.last_updated,this.loading=!1,this.$nextTick(()=>{this.startAutoScroll()})})},beforeUnmount(){this.scrollTimer&&clearInterval(this.scrollTimer)}},w={class:"rankings-wrapper"},P={key:0,class:"loading-box"},E={key:1},M={class:"server-header"},x={class:"header-left"},D={class:"server-title"},W=["title"],N={class:"scroll-icon"},U={class:"scroll-text"},O={class:"rank-category-title"},j={class:"player-list"},B=["onClick"],F={class:"player-main"},H=["src"],I={class:"player-name"},V={class:"player-stats"},z={class:"stat-value"},L={class:"update-footer"};function R(t,e,i,d,l,a){const C=k("McProfile");return n(),r("div",w,[l.loading?(n(),r("div",P,[...e[6]||(e[6]=[s("div",{class:"spinner"},null,-1),s("span",null,"同步排行榜中...",-1)])])):(n(),r("div",E,[(n(!0),r(p,null,f(a.filteredData,(u,_)=>(n(),r("div",{key:_,class:"server-group"},[s("div",M,[s("div",x,[e[7]||(e[7]=s("div",{class:"dot"},null,-1)),s("h2",D,c(_),1)]),s("button",{class:v(["scroll-toggle-btn",{"is-active":l.isAutoScrolling}]),onClick:e[0]||(e[0]=(...o)=>a.toggleAutoScroll&&a.toggleAutoScroll(...o)),title:l.isAutoScrolling?"停止自动滚动":"开始自动滚动"},[s("span",N,c(l.isAutoScrolling?"Ⅱ":"▶"),1),s("span",U,c(l.isAutoScrolling?"正在滚动":"开始滚动"),1)],10,W)]),s("div",{class:"boards-container",ref_for:!0,ref:"scrollContainer",onWheel:e[2]||(e[2]=(...o)=>a.handleWheel&&a.handleWheel(...o)),onMouseenter:e[3]||(e[3]=o=>l.isHovering=!0),onMouseleave:e[4]||(e[4]=o=>l.isHovering=!1)},[(n(!0),r(p,null,f(u,o=>(n(),r("div",{key:o.name,class:"rank-card",onClickCapture:e[1]||(e[1]=(...h)=>a.scrollToCenter&&a.scrollToCenter(...h))},[s("h3",O,c(o.name),1),s("div",j,[(n(!0),r(p,null,f(o.leaderboard.slice(0,i.limit||o.leaderboard.length),(h,m)=>(n(),r("div",{key:m,class:"player-row clickable",onClick:Z=>a.handleClickPlayer(h[1])},[s("div",F,[s("span",{class:v(["rank-index",{"top-three":m<3}])},c(m+1),3),s("img",{src:"https://nmsr.nickac.dev/face/"+h[1],class:"player-avatar"},null,8,H),s("span",I,c(h[1]),1)]),s("div",V,[s("span",z,c(h[2]),1)])],8,B))),128))])],32))),128))],544)]))),128)),s("div",L,"(每小时更新一次) 最后更新于: "+c(l.lastUpdated),1)])),g(C,{"show-details":l.showProfileModal,"onUpdate:showDetails":e[5]||(e[5]=u=>l.showProfileModal=u),"player-profile":l.selectedPlayer},null,8,["show-details","player-profile"])])}const Y=A(T,[["render",R],["__scopeId","data-v-3831c705"]]),K={__name:"排行榜.html",setup(t){return(e,i)=>{const d=k("ClientOnly");return n(),r("div",null,[y(" bot-block-start "),g(d,null,{default:S(()=>[g(Y)]),_:1}),y(" bot-block-end ")])}}},Q=JSON.parse('{"path":"/%E6%8E%92%E8%A1%8C%E6%A6%9C.html","title":"排行榜","lang":"zh-CN","frontmatter":{"title":"排行榜","icon":"trophy","photoSwipe":false,"order":200,"home":true,"heroText":false,"tagline":false,"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"WebPage\\",\\"name\\":\\"排行榜\\"}"],["meta",{"property":"og:url","content":"https://www.csuftmc.dpdns.org/%E6%8E%92%E8%A1%8C%E6%A6%9C.html"}],["meta",{"property":"og:site_name","content":"CUSFTMC"}],["meta",{"property":"og:title","content":"排行榜"}],["meta",{"property":"og:type","content":"website"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-02-15T16:46:31.000Z"}],["meta",{"property":"article:modified_time","content":"2026-02-15T16:46:31.000Z"}]]},"git":{"createdTime":1768142434000,"updatedTime":1771173991000,"contributors":[{"name":"cc_cece","username":"","email":"cc_cece@outlook.com","commits":8}]},"readingTime":{"minutes":0.11,"words":33},"filePathRelative":"排行榜.md"}');export{K as comp,Q as data};
