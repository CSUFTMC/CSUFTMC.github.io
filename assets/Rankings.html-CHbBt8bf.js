import{M as k}from"./PlayerList.vue_vue_type_style_index_0_scoped_fba9f63f_lang-C0umN7ZN.js";/* empty css                                                                 */import{_ as C}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as S,c as o,o as n,a as v,b as s,F as u,d as f,t as c,n as _}from"./app-C191V8bG.js";const T={name:"Rankings",components:{McProfile:k},props:{servers:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},limit:{type:Number,default:null}},data(){return{rankData:{},lastUpdated:"",loading:!0,selectedPlayer:null,showProfileModal:!1,isAutoScrolling:!1,isHovering:!1,scrollTimer:null}},computed:{filteredData(){let t={};return(this.servers.length>0?Object.keys(this.rankData).filter(i=>this.servers.includes(i)):Object.keys(this.rankData)).forEach(i=>{let h=this.rankData[i];this.items.length>0&&(h=h.filter(l=>this.items.includes(l.name))),h.length>0&&(t[i]=h)}),t}},methods:{startAutoScroll(){this.scrollTimer||(this.scrollTimer=setInterval(()=>{this.isAutoScrolling&&!this.isHovering&&this.$refs.scrollContainer&&(Array.isArray(this.$refs.scrollContainer)?this.$refs.scrollContainer:[this.$refs.scrollContainer]).forEach(e=>{const i=e.scrollWidth-e.clientWidth;e.scrollLeft>=i-1?e.scrollTo({left:0,behavior:"smooth"}):e.scrollBy({left:200,behavior:"smooth"})})},3e3))},toggleAutoScroll(){this.isAutoScrolling=!this.isAutoScrolling},scrollToCenter(t){t.currentTarget.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})},handleWheel(t){if(t.deltaY!==0){t.preventDefault();const e=5;t.currentTarget.scrollLeft+=t.deltaY*e}},handleClickPlayer(t){this.selectedPlayer={username:t},this.showProfileModal=!0}},mounted(){fetch("/data/rank.json").then(t=>t.json()).then(t=>{this.rankData=t.data,this.lastUpdated=t.last_updated,this.loading=!1,this.$nextTick(()=>{this.startAutoScroll()})})},beforeUnmount(){this.scrollTimer&&clearInterval(this.scrollTimer)}},b={class:"rankings-wrapper"},A={key:0,class:"loading-box"},P={key:1},w={class:"server-header"},M={class:"header-left"},D={class:"server-title"},x=["title"],R={class:"scroll-icon"},W={class:"scroll-text"},U={class:"rank-category-title"},N={class:"player-list"},j=["onClick"],B={class:"player-main"},F=["src"],H={class:"player-name"},I={class:"player-stats"},z={class:"stat-value"},E={class:"update-footer"};function L(t,e,i,h,l,a){const y=S("McProfile");return n(),o("div",b,[l.loading?(n(),o("div",A,[...e[6]||(e[6]=[s("div",{class:"spinner"},null,-1),s("span",null,"同步排行榜中...",-1)])])):(n(),o("div",P,[(n(!0),o(u,null,f(a.filteredData,(p,g)=>(n(),o("div",{key:g,class:"server-group"},[s("div",w,[s("div",M,[e[7]||(e[7]=s("div",{class:"dot"},null,-1)),s("h2",D,c(g),1)]),s("button",{class:_(["scroll-toggle-btn",{"is-active":l.isAutoScrolling}]),onClick:e[0]||(e[0]=(...r)=>a.toggleAutoScroll&&a.toggleAutoScroll(...r)),title:l.isAutoScrolling?"停止自动滚动":"开始自动滚动"},[s("span",R,c(l.isAutoScrolling?"Ⅱ":"▶"),1),s("span",W,c(l.isAutoScrolling?"正在滚动":"开始滚动"),1)],10,x)]),s("div",{class:"boards-container",ref_for:!0,ref:"scrollContainer",onWheel:e[2]||(e[2]=(...r)=>a.handleWheel&&a.handleWheel(...r)),onMouseenter:e[3]||(e[3]=r=>l.isHovering=!0),onMouseleave:e[4]||(e[4]=r=>l.isHovering=!1)},[(n(!0),o(u,null,f(p,r=>(n(),o("div",{key:r.name,class:"rank-card",onClickCapture:e[1]||(e[1]=(...d)=>a.scrollToCenter&&a.scrollToCenter(...d))},[s("h3",U,c(r.name),1),s("div",N,[(n(!0),o(u,null,f(r.leaderboard.slice(0,i.limit||r.leaderboard.length),(d,m)=>(n(),o("div",{key:m,class:"player-row clickable",onClick:V=>a.handleClickPlayer(d[1])},[s("div",B,[s("span",{class:_(["rank-index",{"top-three":m<3}])},c(m+1),3),s("img",{src:"https://nmsr.nickac.dev/face/"+d[1],class:"player-avatar"},null,8,F),s("span",H,c(d[1]),1)]),s("div",I,[s("span",z,c(d[2]),1)])],8,j))),128))])],32))),128))],544)]))),128)),s("div",E,"(每30分钟更新一次) 最后更新于: "+c(l.lastUpdated),1)])),v(y,{"show-details":l.showProfileModal,"onUpdate:showDetails":e[5]||(e[5]=p=>l.showProfileModal=p),"player-profile":l.selectedPlayer},null,8,["show-details","player-profile"])])}const O=C(T,[["render",L],["__scopeId","data-v-48c94773"]]),G={__name:"Rankings.html",setup(t){return(e,i)=>(n(),o("div",null,[v(O)]))}},K=JSON.parse('{"path":"/Rankings.html","title":"排行榜","lang":"zh-CN","frontmatter":{"title":"排行榜","icon":"server","photoSwipe":false,"order":200,"home":true,"heroText":false,"tagline":false,"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"WebPage\\",\\"name\\":\\"排行榜\\"}"],["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/Rankings.html"}],["meta",{"property":"og:site_name","content":"CUSFTMC"}],["meta",{"property":"og:title","content":"排行榜"}],["meta",{"property":"og:type","content":"website"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-01-11T14:58:08.000Z"}],["meta",{"property":"article:modified_time","content":"2026-01-11T14:58:08.000Z"}]]},"git":{"createdTime":1768142434000,"updatedTime":1768143488000,"contributors":[{"name":"cc_cece","username":"","email":"cc_cece@outlook.com","commits":2}]},"readingTime":{"minutes":0.15,"words":45},"filePathRelative":"Rankings.md"}');export{G as comp,K as data};
