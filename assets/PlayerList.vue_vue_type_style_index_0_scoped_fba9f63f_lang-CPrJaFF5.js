import{c as r,o as n,f as o,a as p,n as _,b as a,t as i,k as c,F as v,d as h,i as g,w as y,g as b,j as w,T as D}from"./app-D5IE3OM5.js";import{_ as M}from"./plugin-vue_export-helper-DlAUqK2U.js";const k={management:[{username:"Ceceport",joinDate:"2025-11-18",role:"Admin",qq:"958630146",desc:"ç°ä»»æœä¸»ï¼Œè¿è¡Œå’Œç»´æŠ¤æœåŠ¡å™¨ã€‚æœ‰ä»»ä½•é—®é¢˜æ¬¢è¿QQè”ç³»ã€‚",customInfo:[{label:"èŒä½",value:"æœåŠ¡å™¨ç®¡ç†å‘˜"},{label:"çŠ¶æ€",value:"æ´»è·ƒ"}]},{username:"Aragron_",role:"Admin",joinDate:"2025-11-18",desc:"æœåŠ¡å™¨ç®¡ç†å‘˜å…¼QQç¾¤ç¾¤ä¸»ã€‚",customInfo:[{label:"èŒä½",value:"æœåŠ¡å™¨ç®¡ç†å‘˜"},{label:"çŠ¶æ€",value:"ä½›ç³»"}]},{username:"Declan",role:"Admin",joinDate:"2025-11-18",desc:"ä¸Šä¸€ä»»æœåŠ¡å™¨æœä¸»ã€‚",customInfo:[{label:"èŒä½",value:"é€€ä¼‘å¹²éƒ¨"},{label:"çŠ¶æ€",value:"ä½›ç³»"}]}],members:[{username:"ovo_Chen",joinDate:"2025-12-16",customInfo:[{label:"çŠ¶æ€",value:"å¸¸é©»"}]},{username:"aasdfghjkl",joinDate:"2025-11-18",customInfo:[{label:"çŠ¶æ€",value:"æ´»è·ƒ"}]},{username:"CHYALING",role:"å»ºç­‘å¸ˆ",joinDate:"2025-11-18",desc:"æœåŠ¡å™¨å¾¡ç”¨å»ºç­‘å¸ˆã€‚",customInfo:[{label:"çŠ¶æ€",value:"å¸¸é©»"}]},{username:"Taoliu",joinDate:"2025-11-24",customInfo:[{label:"çŠ¶æ€",value:"ä½›ç³»"}]},{username:"LiUAuXe",joinDate:"2025-11-19",customInfo:[{label:"çŠ¶æ€",value:"ä½›ç³»"}]}]},j=[...k.management,...k.members],I=j.reduce((l,e)=>(l[e.username]=e,l),{}),S=["æ€»æ¸¸æˆæ—¶é—´","æ­»äº¡æ¬¡æ•°","è¾“å‡ºä¼¤å®³","æ‰¿å—ä¼¤å®³","æ€æ­»åƒµå°¸çš„æ•°é‡","æ€æ­»å°ç™½çš„æ•°é‡"],L={name:"McProfile",props:{username:{type:String,default:""},playerProfile:{type:Object,default:null},showDetails:{type:Boolean,default:!1},size:{type:String,default:"medium",validator:l=>["small","medium","large"].includes(l)}},data(){return{innerShow:!1,achievements:[],loadingRank:!1,rankData:null}},computed:{isExternalMode(){return!!this.playerProfile},isVisible(){return this.isExternalMode?this.showDetails:this.innerShow},profile(){const l=this.isExternalMode?this.playerProfile.username:this.username,e=I[l]||{};return{username:l,role:"ç©å®¶",...e,...this.playerProfile||{}}},avatarUrl(){return this.profile.username?`https://nmsr.nickac.dev/face/${this.profile.username}`:""},roleBadgeStyle(){const l=(this.profile.role||"").toLowerCase();return["admin","owner","op","ç®¡ç†å‘˜","è…ç«¹"].includes(l)?{background:"rgba(220, 38, 38, 0.9)"}:["player","user","ç©å®¶","æˆå‘˜"].includes(l)?{background:"rgba(62, 175, 124, 0.9)"}:{background:"rgba(14, 165, 233, 0.9)"}}},watch:{isVisible(l){l&&this.fetchAndScanRank()}},methods:{async fetchAndScanRank(){if(this.profile.username){this.loadingRank=!0;try{if(!this.rankData){const u=await(await fetch("/data/rank.json")).json();this.rankData=u.data}const l=[];Object.entries(this.rankData).forEach(([e,u])=>{u.forEach(m=>{if(S.includes(m.name)){const d=m.leaderboard.findIndex(s=>s[1]===this.profile.username);d!==-1&&l.push({serverName:e,boardName:m.name,rank:d+1,value:m.leaderboard[d][2]})}})}),this.achievements=l}catch(l){console.error("Rank scanning failed:",l)}finally{this.loadingRank=!1}}},openModal(){this.innerShow=!0},closeModal(){this.innerShow=!1,this.$emit("update:showDetails",!1)},parseLink(l){if(typeof l!="string")return l;const e=/\[([^\]]+)\]\(([^)]+)\)/g;return l.replace(e,'<a href="$2" target="_blank" rel="noopener noreferrer" class="mc-link">$1</a>')}}},N={class:"mc-profile-outer"},C={class:"avatar-wrapper"},q=["src"],x={class:"mc-content"},A={class:"mc-username"},T={key:0,class:"mc-meta"},E={key:0,class:"meta-row"},P={key:1,class:"meta-row"},R={key:1,class:"mc-custom-preview"},z={class:"c-label"},V=["innerHTML"],B={class:"mc-modal-card"},H={class:"modal-header"},Q=["src"],U={class:"modal-body"},F={class:"info-grid"},G={key:0,class:"grid-item"},O={key:1,class:"grid-item"},W=["innerHTML"],X={key:0,class:"desc-section"},Y={class:"desc-text"},J={class:"achievement-box"},K={key:0,class:"loading-rank"},Z={key:1,class:"achievement-list"},$={class:"serv-name"},ee={class:"board-name"},se={class:"a-rank"},ae={class:"a-value"},le={key:2,class:"no-achieve-tip"},re={key:1,class:"slot-area"};function ne(l,e,u,m,d,s){return n(),r("div",N,[s.isExternalMode?o("v-if",!0):(n(),r("div",{key:0,class:_(["mc-card-trigger",`size-${u.size}`]),onClick:e[0]||(e[0]=(...t)=>s.openModal&&s.openModal(...t))},[a("div",C,[a("img",{src:s.avatarUrl,alt:"Avatar",class:"mc-avatar","no-view":""},null,8,q)]),a("div",x,[a("span",A,i(s.profile.username),1),u.size!=="small"?(n(),r("div",T,[s.profile.qq?(n(),r("div",E,[e[3]||(e[3]=a("span",{class:"meta-icon"},"ğŸ§",-1)),c(" "+i(s.profile.qq),1)])):o("v-if",!0),s.profile.joinDate?(n(),r("div",P,[e[4]||(e[4]=a("span",{class:"meta-icon"},"ğŸ“…",-1)),c(" "+i(s.profile.joinDate),1)])):o("v-if",!0)])):o("v-if",!0),u.size==="large"&&s.profile.customInfo&&s.profile.customInfo.length>0?(n(),r("div",R,[e[5]||(e[5]=a("div",{class:"divider"},null,-1)),(n(!0),r(v,null,h(s.profile.customInfo.slice(0,2),(t,f)=>(n(),r("div",{class:"custom-row",key:f},[a("span",z,i(t.label)+":",1),a("span",{class:"c-value",innerHTML:s.parseLink(t.value)},null,8,V)]))),128))])):o("v-if",!0)])],2)),p(D,{name:"fade-pop"},{default:g(()=>[s.isVisible?(n(),r("div",{key:0,class:"mc-modal-overlay",onClick:e[2]||(e[2]=y((...t)=>s.closeModal&&s.closeModal(...t),["self"]))},[a("div",B,[a("button",{class:"close-btn",onClick:e[1]||(e[1]=(...t)=>s.closeModal&&s.closeModal(...t))},"Ã—"),a("div",H,[a("img",{src:s.avatarUrl,class:"modal-avatar","no-view":""},null,8,Q),a("h3",null,i(s.profile.username),1),a("span",{class:"role-badge",style:b(s.roleBadgeStyle)},i(s.profile.role||"Player"),5)]),a("div",U,[a("div",F,[s.profile.qq?(n(),r("div",G,[e[6]||(e[6]=a("small",null,"QQ",-1)),e[7]||(e[7]=c()),a("span",null,i(s.profile.qq),1)])):o("v-if",!0),s.profile.joinDate?(n(),r("div",O,[e[8]||(e[8]=a("small",null,"åŠ å…¥æ—¶é—´",-1)),e[9]||(e[9]=c()),a("span",null,i(s.profile.joinDate),1)])):o("v-if",!0),(n(!0),r(v,null,h(s.profile.customInfo,(t,f)=>(n(),r("div",{class:"grid-item",key:f},[a("small",null,i(t.label),1),a("span",{innerHTML:s.parseLink(t.value)},null,8,W)]))),128))]),s.profile.desc?(n(),r("div",X,[a("p",Y,i(s.profile.desc),1)])):o("v-if",!0),a("div",J,[a("h3",null,"ä¸Šæ¦œæˆå°±ä¸€è§ˆ ("+i(d.achievements.length)+")",1),d.loadingRank?(n(),r("div",K,"æ­£åœ¨åŒæ­¥æ•°æ®...")):d.achievements.length>0?(n(),r("ul",Z,[(n(!0),r(v,null,h(d.achievements,t=>(n(),r("li",{key:t.serverName+t.boardName},[e[10]||(e[10]=c(" åœ¨ ",-1)),a("span",$,i(t.serverName),1),e[11]||(e[11]=c(" çš„ ",-1)),a("span",ee,i(t.boardName),1),e[12]||(e[12]=c(" ä¸­æ’å ",-1)),a("span",se,"#"+i(t.rank),1),e[13]||(e[13]=c("ï¼Œæ€»è®¡ ",-1)),a("span",ae,i(t.value),1)]))),128))])):(n(),r("p",le,"è¯¥ç©å®¶æš‚æ— ä¸Šæ¦œè®°å½•ã€‚"))]),l.$slots.default?(n(),r("div",re,[w(l.$slots,"default",{},void 0,!0)])):o("v-if",!0)])])])):o("v-if",!0)]),_:3})])}const oe=M(L,[["render",ne],["__scopeId","data-v-da1fa3f6"]]);export{oe as M,k as p};
