import{c as n,o as r,a as i,j as p,n as _,b as a,t as o,f as c,F as v,r as h,e as y,w as g,h as b,i as D,k as w,T as j,y as I}from"./app-DNs5TP-L.js";import{_ as M}from"./plugin-vue_export-helper-DlAUqK2U.js";const k={management:[{username:"Ceceport",joinDate:"2025-11-18",role:"ç®¡ç†å‘˜",desc:"ç°ä»»æœä¸»ï¼Œè¿è¡Œå’Œç»´æŠ¤æœåŠ¡å™¨ã€‚",customInfo:[{label:"èŒä½",value:"æœåŠ¡å™¨ç®¡ç†å‘˜"},{label:"çŠ¶æ€",value:"æ´»è·ƒ"}]},{username:"Aragron_",role:"ç®¡ç†å‘˜",joinDate:"2025-11-18",desc:"æœåŠ¡å™¨ç®¡ç†å‘˜å…¼QQç¾¤ç¾¤ä¸»ã€‚",customInfo:[{label:"èŒä½",value:"æœåŠ¡å™¨ç®¡ç†å‘˜"},{label:"çŠ¶æ€",value:"ä½›ç³»"}]},{username:"Declan",role:"ç®¡ç†å‘˜",joinDate:"2025-11-18",desc:"ä¸Šä¸€ä»»æœåŠ¡å™¨æœä¸»ã€‚",customInfo:[{label:"èŒä½",value:"é€€ä¼‘å¹²éƒ¨"},{label:"çŠ¶æ€",value:"ä½›ç³»"}]}],members:[{username:"ovo_Chen",joinDate:"2025-12-16",customInfo:[{label:"çŠ¶æ€",value:"å¸¸é©»"}]},{username:"aasdfghjkl",joinDate:"2025-11-18",customInfo:[{label:"çŠ¶æ€",value:"æ´»è·ƒ"}]},{username:"CHYALING",role:"å»ºç­‘å¸ˆ",joinDate:"2025-11-18",desc:"æœåŠ¡å™¨å¾¡ç”¨å»ºç­‘å¸ˆã€‚",customInfo:[{label:"çŠ¶æ€",value:"å¸¸é©»"}]},{username:"Taoliu",joinDate:"2025-11-24",customInfo:[{label:"çŠ¶æ€",value:"ä½›ç³»"}]},{username:"LEEKUNJIE",joinDate:"2025-11-18",customInfo:[{label:"çŠ¶æ€",value:"æ´»è·ƒ"}]},{username:"LiUAuXe",joinDate:"2025-11-19",customInfo:[{label:"çŠ¶æ€",value:"ä½›ç³»"}]}]},S=[...k.management,...k.members],L=S.reduce((l,e)=>(l[e.username]=e,l),{}),N=["æ€»æ¸¸æˆæ—¶é—´","æ­»äº¡æ¬¡æ•°","è¾“å‡ºä¼¤å®³","æ‰¿å—ä¼¤å®³","æ€æ­»åƒµå°¸çš„æ•°é‡","æ€æ­»å°ç™½çš„æ•°é‡"],C={name:"McProfile",props:{username:{type:String,default:""},playerProfile:{type:Object,default:null},showDetails:{type:Boolean,default:!1},size:{type:String,default:"medium",validator:l=>["small","medium","large"].includes(l)}},data(){return{innerShow:!1,achievements:[],loadingRank:!1,rankData:null}},computed:{isExternalMode(){return!!this.playerProfile},isVisible(){return this.isExternalMode?this.showDetails:this.innerShow},profile(){const l=this.isExternalMode?this.playerProfile.username:this.username,e=L[l]||{};return{username:l,role:"ç©å®¶",...e,...this.playerProfile||{}}},avatarUrl(){return this.profile.username?`https://nmsr.nickac.dev/face/${this.profile.username}`:""},roleBadgeStyle(){const l=(this.profile.role||"").toLowerCase();return["admin","owner","op","ç®¡ç†å‘˜","è…ç«¹"].includes(l)?{background:"rgba(220, 38, 38, 0.9)"}:["player","user","ç©å®¶","æˆå‘˜"].includes(l)?{background:"rgba(62, 175, 124, 0.9)"}:{background:"rgba(14, 165, 233, 0.9)"}}},watch:{isVisible(l){l&&this.fetchAndScanRank()}},methods:{async fetchAndScanRank(){if(this.profile.username){this.loadingRank=!0;try{if(!this.rankData){const u=await(await fetch("/data/rank.json")).json();this.rankData=u.data}const l=[];Object.entries(this.rankData).forEach(([e,u])=>{u.forEach(m=>{if(N.includes(m.name)){const d=m.leaderboard.findIndex(s=>s[1]===this.profile.username);d!==-1&&l.push({serverName:e,boardName:m.name,rank:d+1,value:m.leaderboard[d][2]})}})}),this.achievements=l}catch(l){console.error("Rank scanning failed:",l)}finally{this.loadingRank=!1}}},openModal(){this.innerShow=!0},closeModal(){this.innerShow=!1,this.$emit("update:showDetails",!1)},parseLink(l){if(typeof l!="string")return l;const e=/\[([^\]]+)\]\(([^)]+)\)/g;return l.replace(e,'<a href="$2" target="_blank" rel="noopener noreferrer" class="mc-link">$1</a>')}}},E={class:"mc-profile-outer"},T={class:"avatar-wrapper"},x=["src"],q={class:"mc-content"},P={class:"mc-username"},R={key:0,class:"mc-meta"},z={key:0,class:"meta-row"},A={key:1,class:"meta-row"},B={key:1,class:"mc-custom-preview"},V={class:"c-label"},H=["innerHTML"],U={class:"mc-modal-card"},Q={class:"modal-header"},F=["src"],G={class:"modal-body"},O={class:"info-grid"},J={key:0,class:"grid-item"},K={key:1,class:"grid-item"},W=["innerHTML"],X={key:0,class:"desc-section"},Y={class:"desc-text"},Z={class:"achievement-box"},$={key:0,class:"loading-rank"},ee={key:1,class:"achievement-list"},se={class:"serv-name"},ae={class:"board-name"},le={class:"a-rank"},re={class:"a-value"},ne={key:2,class:"no-achieve-tip"},te={key:1,class:"slot-area"};function oe(l,e,u,m,d,s){return r(),n("div",E,[s.isExternalMode?i("v-if",!0):(r(),n("div",{key:0,class:_(["mc-card-trigger",`size-${u.size}`]),onClick:e[0]||(e[0]=(...t)=>s.openModal&&s.openModal(...t))},[a("div",T,[a("img",{src:s.avatarUrl,alt:"Avatar",class:"mc-avatar","no-view":""},null,8,x)]),a("div",q,[a("span",P,o(s.profile.username),1),u.size!=="small"?(r(),n("div",R,[s.profile.qq?(r(),n("div",z,[e[3]||(e[3]=a("span",{class:"meta-icon"},"ğŸ§",-1)),c(" "+o(s.profile.qq),1)])):i("v-if",!0),s.profile.joinDate?(r(),n("div",A,[e[4]||(e[4]=a("span",{class:"meta-icon"},"ğŸ“…",-1)),c(" "+o(s.profile.joinDate),1)])):i("v-if",!0)])):i("v-if",!0),u.size==="large"&&s.profile.customInfo&&s.profile.customInfo.length>0?(r(),n("div",B,[e[5]||(e[5]=a("div",{class:"divider"},null,-1)),(r(!0),n(v,null,h(s.profile.customInfo.slice(0,2),(t,f)=>(r(),n("div",{class:"custom-row",key:f},[a("span",V,o(t.label)+":",1),a("span",{class:"c-value",innerHTML:s.parseLink(t.value)},null,8,H)]))),128))])):i("v-if",!0)])],2)),(r(),p(I,{to:"body"},[y(j,{name:"fade-pop"},{default:g(()=>[s.isVisible?(r(),n("div",{key:0,class:"mc-modal-overlay",onClick:e[2]||(e[2]=b((...t)=>s.closeModal&&s.closeModal(...t),["self"]))},[a("div",U,[a("button",{class:"close-btn",onClick:e[1]||(e[1]=(...t)=>s.closeModal&&s.closeModal(...t))},"Ã—"),a("div",Q,[a("img",{src:s.avatarUrl,class:"modal-avatar","no-view":""},null,8,F),a("h3",null,o(s.profile.username),1),a("span",{class:"role-badge",style:D(s.roleBadgeStyle)},o(s.profile.role||"Player"),5)]),a("div",G,[a("div",O,[s.profile.qq?(r(),n("div",J,[e[6]||(e[6]=a("small",null,"QQ",-1)),e[7]||(e[7]=c()),a("span",null,o(s.profile.qq),1)])):i("v-if",!0),s.profile.joinDate?(r(),n("div",K,[e[8]||(e[8]=a("small",null,"åŠ å…¥æ—¶é—´",-1)),e[9]||(e[9]=c()),a("span",null,o(s.profile.joinDate),1)])):i("v-if",!0),(r(!0),n(v,null,h(s.profile.customInfo,(t,f)=>(r(),n("div",{class:"grid-item",key:f},[a("small",null,o(t.label),1),a("span",{innerHTML:s.parseLink(t.value)},null,8,W)]))),128))]),s.profile.desc?(r(),n("div",X,[a("p",Y,o(s.profile.desc),1)])):i("v-if",!0),a("div",Z,[a("h3",null,"ä¸Šæ¦œæˆå°±ä¸€è§ˆ ("+o(d.achievements.length)+")",1),d.loadingRank?(r(),n("div",$,"æ­£åœ¨åŒæ­¥æ•°æ®...")):d.achievements.length>0?(r(),n("ul",ee,[(r(!0),n(v,null,h(d.achievements,t=>(r(),n("li",{key:t.serverName+t.boardName},[e[10]||(e[10]=c(" åœ¨ ",-1)),a("span",se,o(t.serverName),1),e[11]||(e[11]=c(" çš„ ",-1)),a("span",ae,o(t.boardName),1),e[12]||(e[12]=c(" ä¸­æ’å ",-1)),a("span",le,"#"+o(t.rank),1),e[13]||(e[13]=c("ï¼Œæ€»è®¡ ",-1)),a("span",re,o(t.value),1)]))),128))])):(r(),n("p",ne,"è¯¥ç©å®¶æš‚æ— ä¸Šæ¦œè®°å½•ã€‚"))]),l.$slots.default?(r(),n("div",te,[w(l.$slots,"default",{},void 0,!0)])):i("v-if",!0)])])])):i("v-if",!0)]),_:3})]))])}const ce=M(C,[["render",oe],["__scopeId","data-v-dfa817ea"]]);export{ce as M,k as p};
